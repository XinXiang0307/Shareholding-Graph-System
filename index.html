<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Xin Xiang">
<meta name="dcterms.date" content="2024-04-27">
<meta name="keywords" content="Knowledge Graph, Risk Management">

<title>金融业与知识图谱</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">金融业与知识图谱</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Xin Xiang 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://www.georgetown.edu/">
            Georgetown University
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 27, 2024</p>
    </div>
  </div>
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    <p>得写个250-500字的abstract 简单实现了，，，，，，能够对后续进行，，，有很好的价值。</p>
  </div>
</div>

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Explain your chosen topic and why it is important for your field.</p>
<p>在这个项目里，我选择了图数据结构，并且阐述在传统金融行业面临的困境。</p>
<p>通过图结构在金融行业的垂直领域进行深耕，能够挖掘出很多我们无法在普通关系性数据库发现的细节。编织出一张知识图谱，辅助金融行业的高风险管理。</p>
</section>
<section id="literature-review" class="level2">
<h2 class="anchored" data-anchor-id="literature-review">Literature Review</h2>
<section id="讨论知识图谱的进化发展历程简短" class="level3">
<h3 class="anchored" data-anchor-id="讨论知识图谱的进化发展历程简短">讨论知识图谱的进化发展历程（简短）</h3>
</section>
<section id="讨论金融系统传统银行里进行数据分析的复杂性和重要性简短" class="level3">
<h3 class="anchored" data-anchor-id="讨论金融系统传统银行里进行数据分析的复杂性和重要性简短">讨论金融系统（传统银行）里进行数据分析的复杂性和重要性（简短）</h3>
</section>
<section id="讨论知识图谱在金融行业的应用重点" class="level3">
<h3 class="anchored" data-anchor-id="讨论知识图谱在金融行业的应用重点">讨论知识图谱在金融行业的应用（重点）</h3>
</section>
</section>
<section id="example-simple-shareholding-graph-system" class="level2">
<h2 class="anchored" data-anchor-id="example-simple-shareholding-graph-system">Example : Simple Shareholding Graph System</h2>
<section id="description" class="level3">
<h3 class="anchored" data-anchor-id="description">Description</h3>
</section>
<section id="data-source" class="level3">
<h3 class="anchored" data-anchor-id="data-source">Data source</h3>
<p><code>person</code> can hold a <code>corp</code> in {share} %</p>
<p><code>person</code> can be relative with another <code>person</code></p>
<p><code>corp</code> can hold another <code>corp</code> in {share} %</p>
<p><code>corp</code> can be a branch of another <code>corp</code></p>
<p><code>person</code> can be as a role of a <code>corp</code></p>
</section>
<section id="code" class="level3">
<h3 class="anchored" data-anchor-id="code">Code</h3>
<section id="data-preparation" class="level4">
<h4 class="anchored" data-anchor-id="data-preparation">Data preparation</h4>
<p>因为原始数据集是放进图数据库直接存储，可以在图数据库中直接设置tag和edge。而我在example中需要自己实现graph类，所以需要对原始数据集进行预处理。</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> pip install faker</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> pip install pydbgen</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: faker in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (24.14.0)
Requirement already satisfied: python-dateutil&gt;=2.4 in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from faker) (2.8.2)
Requirement already satisfied: six&gt;=1.5 in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from python-dateutil&gt;=2.4-&gt;faker) (1.16.0)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: pydbgen in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (1.0.5)
Requirement already satisfied: six in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from pydbgen) (1.16.0)
Requirement already satisfied: Pandas in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from pydbgen) (1.5.3)
Requirement already satisfied: Faker in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from pydbgen) (24.14.0)
Requirement already satisfied: python-dateutil&gt;=2.4 in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from Faker-&gt;pydbgen) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from Pandas-&gt;pydbgen) (2022.2.1)
Requirement already satisfied: numpy&gt;=1.21.0 in /Users/xiangxin/miniforge3/lib/python3.10/site-packages (from Pandas-&gt;pydbgen) (1.26.4)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] corp.csv</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># define the corporation id and name from the csv file</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>path1 <span class="op">=</span> <span class="st">'./data/corp.csv'</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># load the csv into a DataFrame, and specify the column names</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>corp_df <span class="op">=</span> pd.read_csv(path1)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(corp_df.head(<span class="dv">6</span>))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># [2] person.csv</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># define the person id and name from the csv file</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>path2 <span class="op">=</span> <span class="st">'./data/person.csv'</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>person_df <span class="op">=</span> pd.read_csv(path2)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#print(person_df.head(6))</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] person_rel.csv</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># define the relationship degree of person id1 and id2 from the csv file</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>path3 <span class="op">=</span> <span class="st">'./data/person_rel.csv'</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>column_names <span class="op">=</span> [<span class="st">'person_id1'</span>, <span class="st">'person_id2'</span>,<span class="st">'rel_degree'</span>]</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>person_rel_df <span class="op">=</span> pd.read_csv(path3, header<span class="op">=</span><span class="va">None</span>, names<span class="op">=</span>column_names)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#print(person_rel_df.head(6))</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [4] corp_rel.csv</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co"># define the relationship of corporation id1 and id2 from the csv file</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>path4 <span class="op">=</span> <span class="st">'./data/corp_rel.csv'</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>column_names <span class="op">=</span> [<span class="st">'corp_id1'</span>, <span class="st">'corp_id2'</span>]</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>corp_rel_df <span class="op">=</span> pd.read_csv(path4, header<span class="op">=</span><span class="va">None</span>, names<span class="op">=</span>column_names)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co">#print(corp_rel_df.head(6))</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] corp_share.csv</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="co"># define the holdsharing of corporation id1 to id2 from the csv file</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>path5 <span class="op">=</span> <span class="st">'./data/corp_share.csv'</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>column_names <span class="op">=</span> [<span class="st">'corp_id1'</span>, <span class="st">'corp_id2'</span>,<span class="st">'share_per'</span>]</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>corp_share_df <span class="op">=</span> pd.read_csv(path5, header<span class="op">=</span><span class="va">None</span>, names<span class="op">=</span>column_names)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co">#print(corp_share_df.head(6))</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [6] person_corp_share.csv</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="co"># define the holdsharing of person id to the corporation id from the csv file</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>path6 <span class="op">=</span> <span class="st">'./data/person_corp_share.csv'</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>column_names <span class="op">=</span> [<span class="st">'person_id'</span>, <span class="st">'corp_id'</span>,<span class="st">'share_per'</span>]</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>person_corp_share_df <span class="op">=</span> pd.read_csv(path6, header<span class="op">=</span><span class="va">None</span>, names<span class="op">=</span>column_names)</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(person_corp_share_df.head(<span class="dv">6</span>))</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [7] person_corp_role.csv</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co"># define the role of person id in the corporation id from the csv file</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co">path7 = './data/person_corp_role.csv'</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co">column_names = ['person_id', 'corp_id','role']</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co">person_corp_role_df = pd.read_csv(path7, header=None, names=column_names)</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co">print(person_corp_role_df.head(6))</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  corp_id                        corp_name
0     c_0  Leonard, Robertson and Williams
1     c_1           Brown, Turner and Horn
2     c_2                   Wright-Mahoney
3     c_3                  Mcdowell-Ortega
4     c_4         Jones, Cook and Mckinney
5     c_5      Bennett, Brown and Matthews
  person_id corp_id  share_per
0       p_4     c_1         16
1       p_6     c_1         87
2       p_4     c_2          1
3       p_7     c_4         65
4       p_5     c_2         88
5       p_3     c_1         33</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>"\n# [7] person_corp_role.csv\n# define the role of person id in the corporation id from the csv file\npath7 = './data/person_corp_role.csv'\ncolumn_names = ['person_id', 'corp_id','role']\nperson_corp_role_df = pd.read_csv(path7, header=None, names=column_names)\nprint(person_corp_role_df.head(6))\n"</code></pre>
</div>
</div>
<p>对自己写的图数据库的代码进行解释。 参考老师的hw123</p>
<p>The SelfdefinedGraph Class Each of the bullt point here represents an element of this class. - <code>__init__(self)</code>. This</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Python code to illustrate the example</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> sparse</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.sparse <span class="im">import</span> coo_matrix</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SelfdefinedGraph:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.adjacency_list <span class="op">=</span> {}</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.G <span class="op">=</span> nx.DiGraph()</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add_vertex(<span class="va">self</span>, vertex, vertex_type):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> vertex <span class="kw">not</span> <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.adjacency_list[vertex] <span class="op">=</span> {<span class="st">'type'</span>: vertex_type, <span class="st">'edges'</span>: []}</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.G.add_node(vertex, <span class="bu">type</span><span class="op">=</span>vertex_type)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add_edge(<span class="va">self</span>, from_vertex, to_vertex, relationship_type, weight<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> from_vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>].append({</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">'to'</span>: to_vertex,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">'type'</span>: relationship_type,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                <span class="st">'weight'</span>: weight</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.G.add_edge(from_vertex, to_vertex, weight<span class="op">=</span>weight, <span class="bu">type</span><span class="op">=</span>relationship_type)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> remove_vertex(<span class="va">self</span>, vertex):</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Remove all edges to this vertex</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> v <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.adjacency_list[v][<span class="st">'edges'</span>] <span class="op">=</span> [e <span class="cf">for</span> e <span class="kw">in</span> <span class="va">self</span>.adjacency_list[v][<span class="st">'edges'</span>] <span class="cf">if</span> e[<span class="st">'to'</span>] <span class="op">!=</span> vertex]</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Remove the vertex itself</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>            <span class="kw">del</span> <span class="va">self</span>.adjacency_list[vertex]</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> remove_edge(<span class="va">self</span>, from_vertex, to_vertex):</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> from_vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>] <span class="op">=</span> [</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>                e <span class="cf">for</span> e <span class="kw">in</span> <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>] <span class="cf">if</span> e[<span class="st">'to'</span>] <span class="op">!=</span> to_vertex</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> update_edge(<span class="va">self</span>, from_vertex, to_vertex, new_weight):</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> from_vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> edge <span class="kw">in</span> <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>]:</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> edge[<span class="st">'to'</span>] <span class="op">==</span> to_vertex:</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>                    edge[<span class="st">'weight'</span>] <span class="op">=</span> new_weight</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query_vertices_by_type(<span class="va">self</span>, vertex_type):</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Return vertices of a specific type</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> [vertex <span class="cf">for</span> vertex, properties <span class="kw">in</span> <span class="va">self</span>.adjacency_list.items() <span class="cf">if</span> properties[<span class="st">'type'</span>] <span class="op">==</span> vertex_type]</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query_edges_by_type(<span class="va">self</span>, from_vertex, edge_type):</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Return edges of a specific type from a given vertex</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> from_vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> [edge <span class="cf">for</span> edge <span class="kw">in</span> <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>] <span class="cf">if</span> edge[<span class="st">'type'</span>] <span class="op">==</span> edge_type]</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query_edges_by_weight(<span class="va">self</span>, from_vertex, min_weight, max_weight):</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Return edges within a certain weight range from a given vertex</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> from_vertex <span class="kw">in</span> <span class="va">self</span>.adjacency_list:</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> [edge <span class="cf">for</span> edge <span class="kw">in</span> <span class="va">self</span>.adjacency_list[from_vertex][<span class="st">'edges'</span>] <span class="cf">if</span> min_weight <span class="op">&lt;=</span> edge[<span class="st">'weight'</span>] <span class="op">&lt;=</span> max_weight]</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> print_adjacency_list(<span class="va">self</span>):</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>        adjacency_list <span class="op">=</span> <span class="va">self</span>.adjacency_list</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> adjacency_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> visualize_graph(adjacency_list):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    G <span class="op">=</span> nx.DiGraph()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add nodes with different styles if needed</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> node, properties <span class="kw">in</span> adjacency_list.items():</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        G.add_node(node, <span class="bu">type</span><span class="op">=</span>properties[<span class="st">'type'</span>])</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add edges with different colors based on the relationship type</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    edge_colors <span class="op">=</span> []</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> node, properties <span class="kw">in</span> adjacency_list.items():</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> edge <span class="kw">in</span> properties[<span class="st">'edges'</span>]:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            G.add_edge(node, edge[<span class="st">'to'</span>], weight<span class="op">=</span>edge[<span class="st">'weight'</span>])</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> edge[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'holds'</span>:</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                edge_colors.append(<span class="st">'blue'</span>)  <span class="co"># Blue for financial relationships</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> edge[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'relative'</span>:</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                edge_colors.append(<span class="st">'green'</span>)  <span class="co"># Green for family relationships</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> edge[<span class="st">'type'</span>] <span class="op">==</span> <span class="st">'branch'</span>:</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                edge_colors.append(<span class="st">'red'</span>)  <span class="co"># Red for roles</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> nx.spring_layout(G)  <span class="co"># Positions for all nodes</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    nx.draw(G, pos, with_labels<span class="op">=</span><span class="va">True</span>, node_color<span class="op">=</span><span class="st">'lightblue'</span>, edge_color<span class="op">=</span>edge_colors, width<span class="op">=</span><span class="dv">2</span>, node_size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#labels = nx.get_edge_attributes(G, 'weight')</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#nx.draw_networkx_edge_labels(G, pos, edge_labels=labels)</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Graph Visualization of Relationships'</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize graph</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>graph <span class="op">=</span> SelfdefinedGraph()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add persons and corps as vertices</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> person_df.iterrows():</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    graph.add_vertex(row[<span class="st">'person_id'</span>], <span class="st">'person'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> corp_df.iterrows():</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    graph.add_vertex(row[<span class="st">'corp_id'</span>], <span class="st">'corp'</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Add relationship as edges</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> person_corp_share_df.iterrows():</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    graph.add_edge(row[<span class="st">'person_id'</span>], row[<span class="st">'corp_id'</span>], <span class="st">'holds'</span>, row[<span class="st">'share_per'</span>])</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> person_rel_df.iterrows():</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    graph.add_edge(row[<span class="st">'person_id1'</span>], row[<span class="st">'person_id2'</span>], <span class="st">'relative'</span>, row[<span class="st">'rel_degree'</span>])</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> corp_rel_df.iterrows():</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    graph.add_edge(row[<span class="st">'corp_id1'</span>], row[<span class="st">'corp_id2'</span>], <span class="st">'branch'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, row <span class="kw">in</span> corp_share_df.iterrows():</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    graph.add_edge(row[<span class="st">'corp_id1'</span>], row[<span class="st">'corp_id2'</span>], <span class="st">'holds'</span>,row[<span class="st">'share_per'</span>])</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">for _, row in person_corp_role_df.iterrows():</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">    graph.add_edge(row['person_id'], row['corp_id'], 'roles', row['role'])</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>"\nfor _, row in person_corp_role_df.iterrows():\n    graph.add_edge(row['person_id'], row['corp_id'], 'roles', row['role'])\n"</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>graph.print_adjacency_list()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>{'p_0': {'type': 'person',
  'edges': [{'to': 'c_0', 'type': 'holds', 'weight': 65},
   {'to': 'c_4', 'type': 'holds', 'weight': 82},
   {'to': 'p_1', 'type': 'relative', 'weight': 2}]},
 'p_1': {'type': 'person',
  'edges': [{'to': 'c_3', 'type': 'holds', 'weight': 77},
   {'to': 'c_5', 'type': 'holds', 'weight': 16}]},
 'p_2': {'type': 'person',
  'edges': [{'to': 'c_5', 'type': 'holds', 'weight': 4},
   {'to': 'p_4', 'type': 'relative', 'weight': 1}]},
 'p_3': {'type': 'person',
  'edges': [{'to': 'c_1', 'type': 'holds', 'weight': 33},
   {'to': 'c_5', 'type': 'holds', 'weight': 92},
   {'to': 'c_1', 'type': 'holds', 'weight': 99},
   {'to': 'p_2', 'type': 'relative', 'weight': 1}]},
 'p_4': {'type': 'person',
  'edges': [{'to': 'c_1', 'type': 'holds', 'weight': 16},
   {'to': 'c_2', 'type': 'holds', 'weight': 1},
   {'to': 'c_4', 'type': 'holds', 'weight': 70}]},
 'p_5': {'type': 'person',
  'edges': [{'to': 'c_2', 'type': 'holds', 'weight': 88},
   {'to': 'p_4', 'type': 'relative', 'weight': 3}]},
 'p_6': {'type': 'person',
  'edges': [{'to': 'c_1', 'type': 'holds', 'weight': 87},
   {'to': 'c_2', 'type': 'holds', 'weight': 52}]},
 'p_7': {'type': 'person',
  'edges': [{'to': 'c_4', 'type': 'holds', 'weight': 65}]},
 'c_0': {'type': 'corp',
  'edges': [{'to': 'c_4', 'type': 'branch', 'weight': None},
   {'to': 'c_5', 'type': 'branch', 'weight': None},
   {'to': 'c_5', 'type': 'branch', 'weight': None},
   {'to': 'c_0', 'type': 'holds', 'weight': 20},
   {'to': 'c_4', 'type': 'holds', 'weight': 55}]},
 'c_1': {'type': 'corp',
  'edges': [{'to': 'c_2', 'type': 'branch', 'weight': None},
   {'to': 'c_3', 'type': 'holds', 'weight': 78},
   {'to': 'c_1', 'type': 'holds', 'weight': 64}]},
 'c_2': {'type': 'corp',
  'edges': [{'to': 'c_3', 'type': 'branch', 'weight': None},
   {'to': 'c_3', 'type': 'branch', 'weight': None},
   {'to': 'c_0', 'type': 'holds', 'weight': 50}]},
 'c_3': {'type': 'corp',
  'edges': [{'to': 'c_5', 'type': 'holds', 'weight': 55},
   {'to': 'c_4', 'type': 'holds', 'weight': 60}]},
 'c_4': {'type': 'corp',
  'edges': [{'to': 'c_2', 'type': 'branch', 'weight': None},
   {'to': 'c_2', 'type': 'branch', 'weight': None},
   {'to': 'c_3', 'type': 'branch', 'weight': None},
   {'to': 'c_2', 'type': 'holds', 'weight': 36},
   {'to': 'c_1', 'type': 'holds', 'weight': 94},
   {'to': 'c_3', 'type': 'holds', 'weight': 94}]},
 'c_5': {'type': 'corp',
  'edges': [{'to': 'c_2', 'type': 'branch', 'weight': None}]}}</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#print(graph.query_vertices_by_type('person'))</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(graph.query_edges_by_type(<span class="st">'p_5'</span>, <span class="st">'relative'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[{'to': 'p_4', 'type': 'relative', 'weight': 3}]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>G_test <span class="op">=</span> nx.DiGraph()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>G_test.add_node(<span class="st">"A"</span>,<span class="bu">type</span> <span class="op">=</span> <span class="st">'person'</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>G_test.add_node(<span class="st">"B"</span>,<span class="bu">type</span> <span class="op">=</span> <span class="st">'corp'</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>G_test.add_edge(<span class="st">"A"</span>, <span class="st">"B"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>pos_test <span class="op">=</span> nx.circular_layout(G_test)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>nx.draw(G_test, pos_test, with_labels<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-9-output-1.png" width="691" height="499"></p>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>adjacency_list <span class="op">=</span> graph.adjacency_list</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#visualize_graph(adjacency_list=adjacency_list)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> node, properties <span class="kw">in</span> adjacency_list.items():</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> edge <span class="kw">in</span> properties[<span class="st">'edges'</span>]:</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(edge[<span class="st">'type'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>holds
holds
relative
holds
holds
holds
relative
holds
holds
holds
relative
holds
holds
holds
holds
relative
holds
holds
holds
branch
branch
branch
holds
holds
branch
holds
holds
branch
branch
holds
holds
holds
branch
branch
branch
holds
holds
holds
branch</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>这种图结构出来的知识图谱可以运用到金融行业里，比如说进行客户分群，精准提升金融行业</p>
</section>
<section id="references" class="level2 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" role="doc-bibliography">

</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>